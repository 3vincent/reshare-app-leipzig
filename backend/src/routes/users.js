// const { query } = require('express')
const express = require('express')

const router = express.Router()

const Person = require('../models/person')
const Offer = require('../models/offer')
const Comment = require('../models/comment')

/* GET home page. */

/* GET users listing. */
router.get('/', async (req, res) => {
  const query = {}

  if (req.query.name) {
    query.name = req.query.name
  }

  if (req.query.age) {
    query.age = req.query.age
  }

  if (req.query.location) {
    query.location = req.query.location
  }

  res.send(await Person.find(query))
})

router.get('/initialize', async (req, res) => {
  await Person.deleteMany({})
  await Offer.deleteMany({})
  await Comment.deleteMany({})

  const ginger = new Person({
    name: 'ginger39',
    givenName: 'Ginger Baker',
    email: 'ginger@baker.com',
    age: 80,
    location: ['Leipzig', '04229'],
    profilePhoto: '',
  })
  await ginger.setPassword('test')
  await ginger.save()

  const armagan = new Person({
    name: 'Armagan',
    givenName: 'Armagan',
    email: 'armagan@someemail.com',
    age: 29,
    location: ['Berlin', '11234'],
    profilePhoto: '',
  })
  await armagan.setPassword('test')
  await armagan.save()

  const zach = new Person({
    name: 'zach-is-online',
    givenName: 'Zach Hill',
    email: 'zach@hill.com',
    age: 41,
    location: ['Leipzig', '04177'],
    profilePhoto: '',
  })
  await zach.setPassword('test')
  await zach.save()

  const gingersOffer = await Offer.create({
    title: 'My Vue.JS socks',
    location: ['Leipzig', '04277'],
    photos: [
      'data:image/jpeg;base64,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',
    ],
    status: 'open',
    category: 'Clothing',
    description: 'Like new, never worn.',
  })
  await ginger.createOffer(gingersOffer)
  await armagan.likeOffer(gingersOffer)
  await ginger.likeOffer(gingersOffer)
  await armagan.leaveComment(gingersOffer, 'These are great!!')

  const gingersOffer2 = await Offer.create({
    title: 'Wash dishes',
    location: ['Leipzig', '04277'],
    photos: [
      'data:image/png;base64,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',
    ],
    status: 'open',
    category: 'Services',
    description: 'My job is to do the dishes. I can help you clean if you need help ðŸ˜‰ðŸ˜‰',
  })
  await ginger.createOffer(gingersOffer2)
  await armagan.likeOffer(gingersOffer2)
  await ginger.leaveComment(gingersOffer2, 'Awesome!!! ðŸ™‚')
  setTimeout(async () => {
    await armagan.leaveComment(gingersOffer2, 'very nice')
  }, 5000)

  const armaganOffer = await Offer.create({
    title: 'Dish Washer',
    location: ['Berlin', '11234'],
    photos: [
      'https://www.ikea.com/us/en/images/products/essentiell-built-in-dishwasher-black-stainless-steel__0854909_pe780738_s5.jpg',
    ],
    status: 'open',
    category: 'Electrical Devices',
    description: 'It is like new. Give it as-is.',
  })
  await armagan.createOffer(armaganOffer)
  await ginger.likeOffer(armaganOffer)
  await ginger.leaveComment(armaganOffer, 'This is a good dish washer')
  await ginger.leaveComment(armaganOffer, 'Stil there?')
  await armagan.leaveComment(armaganOffer, 'bump')

  res.sendStatus(200)
})

// router.get('/:userID', async (req, res) => {
//   const person = await Person.findById(req.params.userID)
//   if (person) res.render('user', { person })
//   else res.sendStatus(404)
// })

router.get('/:userId', async (req, res) => {
  try {
    const person = await Person.findById(req.params.userId)
    if (person) res.send(person)
    else res.sendStatus(404)
  } catch (err) {
    console.log(err)
    res.sendStatus(500)
  }
})

// router.get('/:userId/json', async (req, res) => {
//   const person = await Person.findById(req.params.userId)
//   res.send(person)
// })

// This could be used to show users like website.com/users/ben
// but it interferes with website.com/users/<someMongoID>
// so I comment it out
//
// router.get('/:name', async (req, res) => {
//   const person = await Person.findById(req.params.userId)
//   if (person) res.send(await Person.find({ name: req.params.name }))
//   else res.sendStatus(404)
// })

module.exports = router
